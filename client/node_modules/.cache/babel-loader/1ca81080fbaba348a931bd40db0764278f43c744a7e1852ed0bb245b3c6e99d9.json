{"ast":null,"code":"// src/components/Recipes.jsx\nimport React,{useCallback,useEffect,useState}from\"react\";import RecipeCard from\"./RecipeCard\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{buildUrl}from\"../utils/apiConfig\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Recipes=()=>{const[recipes,setRecipes]=useState([]);const[searchKey,setSearchKey]=useState(\"\");const token=localStorage.getItem(\"token\");const fetchRecipes=useCallback(async()=>{try{const res=await fetch(buildUrl(\"/auth/recipe\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});if(!res.ok){throw new Error(\"Failed to fetch recipes\");}const data=await res.json();setRecipes(data);}catch(err){console.error(\"Error fetching recipes:\",err);toast.error(\"Could not load recipes.\");}},[token]);useEffect(()=>{fetchRecipes();},[fetchRecipes]);const handleDelete=async id=>{if(!window.confirm(\"Delete this recipe?\"))return;try{const res=await fetch(buildUrl(\"/auth/recipe/\".concat(id)),{method:\"DELETE\",headers:{Authorization:\"Bearer \".concat(token)}});if(!res.ok){throw new Error(\"Failed to delete\");}toast.success(\"Recipe deleted\");// remove from state\nsetRecipes(prev=>prev.filter(r=>r._id!==id));}catch(err){console.error(err);toast.error(\"Error deleting recipe\");}};const handleAddFavorite=async id=>{try{const res=await fetch(buildUrl(\"/auth/likedRecipes/\".concat(id)),{method:\"POST\",headers:{Authorization:\"Bearer \".concat(token)}});if(!res.ok){const errData=await res.json();throw new Error(errData.error||\"Failed to add favorite\");}toast.success(\"Added to favorites\");}catch(err){console.error(err);toast.error(err.message);}};const handleSearchChange=async e=>{const key=e.target.value;setSearchKey(key);if(key.trim().length===0){fetchRecipes();}else{try{const res=await fetch(buildUrl(\"/auth/searchRecipes/\".concat(key)),{method:\"GET\",headers:{Authorization:\"Bearer \".concat(token)}});if(!res.ok){throw new Error(\"Search failed\");}const data=await res.json();setRecipes(data);}catch(err){console.error(err);toast.error(\"Search fetch error\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'2.5rem',fontWeight:'700',color:'#2d3748',background:'linear-gradient(135deg, #ff9a9e 0%, #a8edea 50%, #fed6e3 100%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',backgroundClip:'text',marginBottom:'0.5rem'},children:\"Delicious Recipes\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#718096',fontSize:'1.1rem'},children:\"Discover and share amazing recipes from around the world\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-bar\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search recipes by name, ingredients, or keywords...\",value:searchKey,onChange:handleSearchChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"recipe-list\",children:recipes.map(recipe=>/*#__PURE__*/_jsx(RecipeCard,{recipe:recipe,onDelete:handleDelete,onAddFavorite:handleAddFavorite},recipe._id))}),recipes.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No recipes found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Try adjusting your search or add a new recipe!\"})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default Recipes;","map":{"version":3,"names":["React","useCallback","useEffect","useState","RecipeCard","ToastContainer","toast","buildUrl","jsx","_jsx","jsxs","_jsxs","Recipes","recipes","setRecipes","searchKey","setSearchKey","token","localStorage","getItem","fetchRecipes","res","fetch","method","headers","Authorization","concat","ok","Error","data","json","err","console","error","handleDelete","id","window","confirm","success","prev","filter","r","_id","handleAddFavorite","errData","message","handleSearchChange","e","key","target","value","trim","length","className","children","style","textAlign","marginBottom","fontSize","fontWeight","color","background","WebkitBackgroundClip","WebkitTextFillColor","backgroundClip","type","placeholder","onChange","map","recipe","onDelete","onAddFavorite"],"sources":["C:/Users/Mahadeva G S/Desktop/Recipe_App/client/src/Components/Recipes.js"],"sourcesContent":["// src/components/Recipes.jsx\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport RecipeCard from \"./RecipeCard\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { buildUrl } from \"../utils/apiConfig\";\n\nconst Recipes = () => {\n  const [recipes, setRecipes] = useState([]);\n  const [searchKey, setSearchKey] = useState(\"\");\n\n  const token = localStorage.getItem(\"token\");\n\n  const fetchRecipes = useCallback(async () => {\n    try {\n      const res = await fetch(buildUrl(\"/auth/recipe\"), {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) {\n        throw new Error(\"Failed to fetch recipes\");\n      }\n      const data = await res.json();\n      setRecipes(data);\n    } catch (err) {\n      console.error(\"Error fetching recipes:\", err);\n      toast.error(\"Could not load recipes.\");\n    }\n  }, [token]);\n\n  useEffect(() => {\n    fetchRecipes();\n  }, [fetchRecipes]);\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"Delete this recipe?\")) return;\n    try {\n      const res = await fetch(buildUrl(`/auth/recipe/${id}`), {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) {\n        throw new Error(\"Failed to delete\");\n      }\n      toast.success(\"Recipe deleted\");\n      // remove from state\n      setRecipes((prev) => prev.filter((r) => r._id !== id));\n    } catch (err) {\n      console.error(err);\n      toast.error(\"Error deleting recipe\");\n    }\n  };\n\n  const handleAddFavorite = async (id) => {\n    try {\n      const res = await fetch(buildUrl(`/auth/likedRecipes/${id}`), {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) {\n        const errData = await res.json();\n        throw new Error(errData.error || \"Failed to add favorite\");\n      }\n      toast.success(\"Added to favorites\");\n    } catch (err) {\n      console.error(err);\n      toast.error(err.message);\n    }\n  };\n\n  const handleSearchChange = async (e) => {\n    const key = e.target.value;\n    setSearchKey(key);\n\n    if (key.trim().length === 0) {\n      fetchRecipes();\n    } else {\n      try {\n        const res = await fetch(buildUrl(`/auth/searchRecipes/${key}`), {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        if (!res.ok) {\n          throw new Error(\"Search failed\");\n        }\n        const data = await res.json();\n        setRecipes(data);\n      } catch (err) {\n        console.error(err);\n        toast.error(\"Search fetch error\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"main-content\">\n      <div style={{ textAlign: 'center', marginBottom: '2rem' }}>\n        <h1 style={{ \n          fontSize: '2.5rem', \n          fontWeight: '700', \n          color: '#2d3748',\n          background: 'linear-gradient(135deg, #ff9a9e 0%, #a8edea 50%, #fed6e3 100%)',\n          WebkitBackgroundClip: 'text',\n          WebkitTextFillColor: 'transparent',\n          backgroundClip: 'text',\n          marginBottom: '0.5rem'\n        }}>\n          Delicious Recipes\n        </h1>\n        <p style={{ color: '#718096', fontSize: '1.1rem' }}>\n          Discover and share amazing recipes from around the world\n        </p>\n      </div>\n      \n      <div className=\"search-bar\">\n        <input\n          type=\"text\"\n          placeholder=\"Search recipes by name, ingredients, or keywords...\"\n          value={searchKey}\n          onChange={handleSearchChange}\n        />\n      </div>\n      \n      <div className=\"recipe-list\">\n        {recipes.map((recipe) => (\n          <RecipeCard\n            key={recipe._id}\n            recipe={recipe}\n            onDelete={handleDelete}\n            onAddFavorite={handleAddFavorite}\n          />\n        ))}\n      </div>\n      \n      {recipes.length === 0 && (\n        <div className=\"empty-state\">\n          <h3>No recipes found</h3>\n          <p>Try adjusting your search or add a new recipe!</p>\n        </div>\n      )}\n      \n      <ToastContainer />\n    </div>\n  );\n};\n\nexport default Recipes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}