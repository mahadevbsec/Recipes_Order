{"ast":null,"code":"import React,{useCallback,useEffect,useState}from\"react\";import\"../Styles/likedProducts.css\";import{toast,ToastContainer}from\"react-toastify\";import{buildUrl}from\"../utils/apiConfig\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LikedProducts=()=>{const[likedProducts,setLikedProducts]=useState([]);const fetchLikedProducts=useCallback(async()=>{try{const response=await fetch(buildUrl(\"/auth/likedRecipes\"));if(!response.ok){toast.error(\"Failed to fetch liked products\");}const data=await response.json();// Set the fetched data to the state\nsetLikedProducts(data);}catch(error){toast.error(\"Error fetching liked products:\",error);}},[]);useEffect(()=>{fetchLikedProducts();},[fetchLikedProducts]);const handleRemoveItem=async recipeId=>{try{if(window.confirm(\"Are you sure you wanna remove this recipe from favourites??\")){const response=await fetch(buildUrl(\"/auth/removeLiked/\".concat(recipeId)),{method:\"DELETE\"});if(response.ok){toast.success(\"Item Removed successfully\");fetchLikedProducts();setTimeout(()=>{window.location.href=\"/liked-products\";},4000);}else{const data=await response.json();toast.error(data.error);}}else{window.location.href=\"/liked-products\";}}catch(error){toast.error(\"Error removing item from liked products:\",error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"likedRecipes\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Favorite Recipes\"}),/*#__PURE__*/_jsx(\"ul\",{children:likedProducts.map(product=>/*#__PURE__*/_jsx(\"li\",{className:\"list\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:product.title}),/*#__PURE__*/_jsx(\"p\",{children:product.instructions}),/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.title}),/*#__PURE__*/_jsx(\"h4\",{children:\"Ingredients:\"}),/*#__PURE__*/_jsx(\"ul\",{children:product.ingredients.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"ingredients-list\",children:product.ingredients.map((ingredient,index)=>/*#__PURE__*/_jsx(\"li\",{children:ingredient},index))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"instructions-container\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Instructions:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"instructions-list\",children:product.instructions.split(\"\\n\").map((step,index)=>/*#__PURE__*/_jsx(\"p\",{children:step},index))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"remove-item-button\",onClick:()=>handleRemoveItem(product._id),children:\"Remove Item\"})]})},product._id))}),/*#__PURE__*/_jsx(ToastContainer,{})]})});};export default LikedProducts;","map":{"version":3,"names":["React","useCallback","useEffect","useState","toast","ToastContainer","buildUrl","jsx","_jsx","jsxs","_jsxs","LikedProducts","likedProducts","setLikedProducts","fetchLikedProducts","response","fetch","ok","error","data","json","handleRemoveItem","recipeId","window","confirm","concat","method","success","setTimeout","location","href","className","children","map","product","title","instructions","src","imageUrl","alt","ingredients","length","ingredient","index","split","step","onClick","_id"],"sources":["C:/Users/Mahadeva G S/Desktop/Recipe_App/client/src/Components/LikedProducts.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport \"../Styles/likedProducts.css\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { buildUrl } from \"../utils/apiConfig\";\n\nconst LikedProducts = () => {\n  const [likedProducts, setLikedProducts] = useState([]);\n\n  const fetchLikedProducts = useCallback(async () => {\n    try {\n      const response = await fetch(buildUrl(\"/auth/likedRecipes\"));\n\n      if (!response.ok) {\n        toast.error(\"Failed to fetch liked products\");\n      }\n\n      const data = await response.json();\n\n      // Set the fetched data to the state\n      setLikedProducts(data);\n    } catch (error) {\n      toast.error(\"Error fetching liked products:\", error);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchLikedProducts();\n  }, [fetchLikedProducts]);\n\n  const handleRemoveItem = async (recipeId) => {\n    try {\n      if (\n        window.confirm(\n          \"Are you sure you wanna remove this recipe from favourites??\"\n        )\n      ) {\n        const response = await fetch(\n          buildUrl(`/auth/removeLiked/${recipeId}`),\n          {\n            method: \"DELETE\",\n          }\n        );\n\n        if (response.ok) {\n          toast.success(\"Item Removed successfully\");\n          fetchLikedProducts();\n          setTimeout(() => {\n            window.location.href = \"/liked-products\";\n          }, 4000);\n        } else {\n          const data = await response.json();\n          toast.error(data.error);\n        }\n      } else {\n        window.location.href = \"/liked-products\";\n      }\n    } catch (error) {\n      toast.error(\"Error removing item from liked products:\", error);\n    }\n  };\n\n  return (\n    <div className=\"main-content\">\n      <div className=\"likedRecipes\">\n        <h2>My Favorite Recipes</h2>\n      <ul>\n        {likedProducts.map((product) => (\n          <li key={product._id} className=\"list\">\n            <div>\n              <h3>{product.title}</h3>\n              <p>{product.instructions}</p>\n              <img src={product.imageUrl} alt={product.title} />\n              <h4>Ingredients:</h4>\n              <ul>\n                {product.ingredients.length > 0 && (\n                  <ul className=\"ingredients-list\">\n                    {product.ingredients.map((ingredient, index) => (\n                      <li key={index}>{ingredient}</li>\n                    ))}\n                  </ul>\n                )}\n              </ul>\n\n              <div className=\"instructions-container\">\n                <h4>Instructions:</h4>\n                <div className=\"instructions-list\">\n                  {product.instructions.split(\"\\n\").map((step, index) => (\n                    <p key={index}>{step}</p>\n                  ))}\n                </div>\n              </div>\n\n              <button\n                className=\"remove-item-button\"\n                onClick={() => handleRemoveItem(product._id)}\n              >\n                Remove Item\n              </button>\n            </div>\n          </li>\n        ))}\n      </ul>\n      <ToastContainer />\n      </div>\n    </div>\n  );\n};\n\nexport default LikedProducts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}